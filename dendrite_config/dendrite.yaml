version: 2
global:
  server_name: matrix.pension.test
  private_key: /etc/dendrite/matrix_key.pem
  key_validity_period: 168h0m0s
  trusted_third_party_id_servers:
    - matrix.org
    - vector.im
  disable_federation: false

database:
  connection_string: postgres://workplace:password@postgres:5432/dendrite?sslmode=disable
  max_open_conns: 10
  max_idle_conns: 5

client_api:
  registration_shared_secret: "dendrite-secret-key-2025"
  registration_disabled: true
  internal_api:
    listen: 0.0.0.0:8008
    connect: http://localhost:8008
  external_api:
    listen: 0.0.0.0:8008
    cors:
      allowed_origins:
        - "http://localhost:3000"
        - "http://ui.pension.test"
        - "http://backend.pension.test"

federation_api:
  internal_api:
    listen: 0.0.0.0:8008
    connect: http://localhost:8008
  external_api:
    listen: 0.0.0.0:8008
  database:
    connection_string: postgres://workplace:password@postgres:5432/dendrite?sslmode=disable

media_api:
  internal_api:
    listen: 0.0.0.0:8008
    connect: http://localhost:8008
  external_api:
    listen: 0.0.0.0:8008
  base_path: /data/media
  database:
    connection_string: postgres://workplace:password@postgres:5432/dendrite?sslmode=disable

sync_api:
  internal_api:
    listen: 0.0.0.0:8008
    connect: http://localhost:8008
  database:
    connection_string: postgres://workplace:password@postgres:5432/dendrite?sslmode=disable

room_server:
  internal_api:
    listen: 0.0.0.0:8008
    connect: http://localhost:8008
  external_api:
    listen: 0.0.0.0:8008
  database:
    connection_string: postgres://workplace:password@postgres:5432/dendrite?sslmode=disable

user_api:
  internal_api:
    listen: 0.0.0.0:8008
    connect: http://localhost:8008
  external_api:
    listen: 0.0.0.0:8008
  account_database:
    connection_string: postgres://workplace:password@postgres:5432/dendrite?sslmode=disable

key_server:
  internal_api:
    listen: 0.0.0.0:8008
    connect: http://localhost:8008
  external_api:
    listen: 0.0.0.0:8008
  database:
    connection_string: postgres://workplace:password@postgres:5432/dendrite?sslmode=disable

relay_api:
  internal_api:
    listen: 0.0.0.0:8008
    connect: http://localhost:8008
  external_api:
    listen: 0.0.0.0:8008
  database:
    connection_string: postgres://workplace:password@postgres:5432/dendrite?sslmode=disable

presence_api:
  internal_api:
    listen: 0.0.0.0:8008
    connect: http://localhost:8008
  external_api:
    listen: 0.0.0.0:8008
  database:
    connection_string: postgres://workplace:password@postgres:5432/dendrite?sslmode=disable

mscs:
  mscs:
    - msc2836
    - msc2946
    - msc2444
    - msc2753
  database:
    connection_string: postgres://workplace:password@postgres:5432/dendrite?sslmode=disable 